!function(t,e,i){function n(t){return"[object Array]"===Object.prototype.toString.call(t)}function n(t){return"[object Array]"===Object.prototype.toString.call(t)}function r(){if(e.body){var t=e.createElement("script");t.type="text/javascript",t.async=!0,t.src=u,t.onload=t.onreadystatechange=function(){if(!this.readyState||"loaded"==this.readyState||"complete"==this.readyState){t.parentNode.removeChild(t);var i=e.createElement("iframe");i.sandbox="allow-scripts allow-same-origin",i.style.display="none",i.src=_,e.body.insertBefore(i,e.body.firstChild)}},e.body.insertBefore(t,e.body.firstChild)}else setTimeout(r,50)}_py.getLast=function(t){for(var e=this.length-1;0<=e;e--)if(n(this[e])&&this[e][0]==t)return this[e][1];return null};for(var o=_py.getLast("a"),a=[],s=o&&o.split(".")[0],p=!0,c=0;c<a.length;c++)if(a[c]==s){p=!1;break}if(p){var u=_py.getLast("p"),l=_py.getLast("pi"),y=_py.getLast("pv"),g=_py.getLast("e"),m=_py.getLast("domain"),d=_py.getLast("mapping"),f=_py.getLast("urlParam");if(function(t,e,i,n,r){t._CommandName_=n,t[n]=t[n]||function(){return(t[n].q=t[n].q||[]).push(arguments),t[n].track=function(){(t[n].q[t[n].q.length-1].t=[]).push(arguments)},t[n]},t[n].a=r,t[n].l=1*new Date;var o=e.createElement(i);o.async=1,o.src="//fm.ipinyou.com/j/a.js";var a=e.getElementsByTagName(i)[0];a.parentNode.insertBefore(o,a)}(t,e,"script","py",o),null!=y&&py("set","user",{category:y}),null!=g&&py("set","extend",g),null!=m&&py("set","domain",m),null!=d&&1===d&&py("set","mapping",0),null!=f&&py("set","clickParam",f),null!=l){var v={};v.product_no=l.id,v.name=l.name,v.brand=l.brand,v.orig_price=l.origPrice,v.price=l.price,v.pc_pic_url=l.imgUrl,v.product_url=l.productUrl,v.category=l.category,v.sold_out=l.soldOut,l.currency&&(v.currency_code=l.currency),py("event","viewItem",v)}else null!=u?py("event","viewItem",u):py("event","viewPage")}else{var b=function(){var t=location.hostname,e=/^\d{1,3}.\d{1,3}.\d{1,3}.\d{1,3}$/,i=t.split("."),n=i.length-2;if(e.test(t)||2===i.length)return t;for(;0<=n;--n){if("www"===i[n])return i.slice(n+1).join(".");if(-1===",com,net,org,gov,edu,info,name,int,mil,arpa,asia,biz,pro,coop,aero,museum,ac,ad,ae,af,ag,ai,al,am,an,ao,aq,ar,as,at,au,aw,az,ba,bb,bd,be,bf,bg,bh,bi,bj,bm,bn,bo,br,bs,bt,bv,bw,by,bz,ca,cc,cf,cg,ch,ci,ck,cl,cm,cn,co,cq,cr,cu,cv,cx,cy,cz,de,dj,dk,dm,do,dz,ec,ee,eg,eh,es,et,ev,fi,fj,fk,fm,fo,fr,ga,gb,gd,ge,gf,gh,gi,gl,gm,gn,gp,gr,gt,gu,gw,gy,hk,hm,hn,hr,ht,hu,id,ie,il,in,io,iq,ir,is,it,jm,jo,jp,ke,kg,kh,ki,km,kn,kp,kr,kw,ky,kz,la,lb,lc,li,lk,lr,ls,lt,lu,lv,ly,ma,mc,md,me,mg,mh,ml,mm,mn,mo,mp,mq,mr,ms,mt,mv,mw,mx,my,mz,na,nc,ne,nf,ng,ni,nl,no,np,nr,nt,nu,nz,om,pa,pe,pf,pg,ph,pk,pl,pm,pn,pr,pt,pw,py,qa,re,ro,ru,rw,sa,sb,sc,sd,se,sg,sh,si,sj,sk,sl,sm,sn,so,sr,st,su,sy,sz,tc,td,tf,tg,th,tj,tk,tm,tn,to,tp,tr,tt,tv,tw,tz,ua,ug,uk,us,uy,va,vc,ve,vg,vn,vu,wf,ws,ye,yu,za,zm,zr,zw,".indexOf(","+i[n]+","))return i.slice(n).join(".")}return t};if(_py.getLast=function(t){for(var e=this.length-1;0<=e;e--)if(n(this[e])&&this[e][0]==t)return this[e][1]},_py.serialize=function(){function t(t,e){for(var i=0;i<t.length;i++)if(t[i]===e)return i;return-1}for(var e,n=["domain","urlParam","pi","e","p","mapping"],r=[],o=[],a=[],s=0;s<this.length;s++)e=this[s][0],-1===t(n,e)&&(o[e]=o[e]||[],0<o[e].length?-1===t(o[e],this[s][1])&&o[e].push(this[s][1]):(o[e].push(this[s][1]),r.push([e,o[e]])));for(s=0;s<r.length;s++)a.push(r[s][0]+"="+i(r[s][1].join(",")));return a.join("&")},t.ipy={r:/(^|&)jump=(\d*)/i,cookie:{set:function(t,n,r,o,a){z=new Date,z.setTime(z.getTime()+(r||0)),e.cookie=t+"="+i(n||"")+(r?"; expires="+z.toGMTString():"")+";path=/; domain="+(o||location.host)+(a?"; secure":"")},get:function(t){return(t=e.cookie.match(RegExp("(^|;)\\s*"+t+"=([^;]*)","i")))?decodeURIComponent(t[2]):""}},setCookie:function(t,e){ipy.cookie.set(t,e,31536e6,b())},setSession:function(t,e){ipy.cookie.set(t,e,0,b())},getJump:function(){var t=ipy.cookie.get("ipysession");return t&&(t=t.match(ipy.r))?parseInt(t[2]):0},setJump:function(t){var e=ipy.cookie.get("ipysession");e?e.match(ipy.r)?ipy.setSession("ipysession",e.replace(/jump=(\d*)/,"jump="+t)):ipy.setSession("ipysession",e+"&jump="+t):ipy.setSession("ipysession","jump="+t)},getInfo:function(e){var i=ipy.cookie.get(e);if(i)return i;try{if(t.localStorage&&localStorage.getItem(e))return localStorage.getItem(e)}catch(t){}return""},setInfo:function(e,i){if(null!=i&&""!=i){ipy.setCookie(e,i);try{t.localStorage&&localStorage.setItem(e,i)}catch(t){}}},getQueryString:function(e){var i=new RegExp("(^|&)"+e+"=([^&]*)(&|$)"),n=t.location.search.substr(1).match(i);return null!=n?n[2]:""},setExendParam:function(t,e,i){var n=t||"",r=e||"",o=i||"";ipy.getExtendParam(n,r,o)},getExtendParam:function(t,e,i){var n="";null!=t&&t&&(n="p="+t),null!=e&&e&&_py.push(["pv",e]),null!=i&&i&&(n+="&ext="+i),ipy.extendSend(n)},itemInfo:function(t){var e,n=[];switch(typeof t){case"string":e=t;break;case"object":for(var r=["id","name","origPrice","price","brand","imgUrl","productUrl","categoryId","category","promotion","discount","soldOut","domain","currency"],o=0;o<r.length;o++){var a=void 0==t[r[o]]?"":t[r[o]];a=a.toString(),n.push(i(a))}ipy.id=t.id||"",e=n.join(",");break;default:return e=""}return e},extendSend:function(t){var e="";_py.getLast("e")&&(e="e="+_py.getLast("e")+"&"),e+=t,j=_py.getLast("domain"),u=("https:"==location.protocol?"https":"http")+"://"+j+"/adv?"+_py.serialize()+ipy.getSession()+"&e="+h(e)+"&rd="+(new Date).getTime(),(new Image).src=u},getSession:function(){var t=_py.getLast("c");if(t&&null!=t){var e=ipy.getJump();return isNaN(e)||0!=e?(e++,ipy.setJump(e),"&s="+e):(ipy.setJump(e+1),"")}return""},getP:function(){var t=_py.getLast("p"),e=ipy.id?ipy.id:"";return t=t||e}},1!==_py.getLast("mapping"))var _="http:"!=location.protocol?"https://cm.ipinyou.com/cmas.html?a="+_py.getLast("a"):"http://fm.p0y.cn/cm/cma.html?a="+_py.getLast("a");var g,l,u=location.href,k=e.referrer;t.parent!=t&&(u=k,k=""),u&&_py.push(["u",u]),k&&_py.push(["r",k]);var w=_py.getLast("urlParam")||"pyck",m=ipy.getQueryString(w);m=m||ipy.getInfo("ipycookie"),ipy.setInfo("ipycookie",m),m&&_py.push(["c",m]);var j=_py.getLast("domain"),g=_py.getLast("e");g=""!=g&&g?"e="+_py.getLast("e"):"",l=ipy.itemInfo(_py.getLast("pi")),u=("https:"==location.protocol?"https":"http")+"://"+j+"/adv?"+_py.serialize()+ipy.getSession()+"&pi="+i(l)+"&p="+i(ipy.getP())+"&e="+i(g)+"&rd="+(new Date).getTime()+"&v=1",setTimeout(r,10)}}(window,document,encodeURIComponent);